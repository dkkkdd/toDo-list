(()=>{"use strict";const t=[{id:crypto.randomUUID(),title:"New Year",priority:"default"},{id:crypto.randomUUID(),title:"Work",priority:"important"}],e=new Set;let n="all";const o={getAll:()=>[...t],add(e){t.push(e),this.notify()},getFiltered:()=>"all"===n?[...t]:t.filter(t=>t.priority===n),setFilter(t){n=t,this.notify()},remove(e){const n=t.findIndex(t=>t.id===e);-1!==n&&(t.splice(n,1),this.notify())},update(e,n){const o=t.find(t=>t.id===e);o&&(Object.assign(o,n),this.notify())},find:e=>t.find(t=>t.id===e),subscribe:t=>(e.add(t),()=>e.delete(t)),notify(){e.forEach(t=>t(this.getFiltered()))}},c=(t,e)=>{"open"===e?t.classList.remove("none"):t.classList.add("none")},r=(t,e,n)=>{t.value="",e.value="default",t.style.borderColor="#214228",n.classList.add("none")},i={isEditMode:!1,projectToEdit:null},a=new Set,d={getState:()=>({...i}),setEditMode(t=null){i.isEditMode=!!t,i.projectToEdit=t,this.notify()},reset(){i.isEditMode=!1,i.projectToEdit=null,this.notify()},subscribe:t=>(a.add(t),()=>a.delete(t)),notify(){a.forEach(t=>t(this.getState()))}};document.querySelector(".content"),(()=>{const t=document.querySelector(".aside"),e=(()=>{const t=document.createElement("div");t.classList.add("confirm-window","none");const e=document.createElement("div");e.classList.add("confirm-card");const n=document.createElement("p");n.textContent="Are you sure?";const o=document.createElement("div");o.classList.add("confirm-btn-container");const c=document.createElement("button");c.classList.add("btn","delete-project-btn"),c.textContent="Delete";const r=document.createElement("button");return r.classList.add("cancel-dalete-project-btn","btn"),r.textContent="Cancel",o.append(c,r),e.append(n,o),t.append(e),t})(),n=document.createElement("button");n.classList.add("btn","create-btn","icon-folder-plus"),n.textContent=" New Project";const o=document.createElement("select");o.id="project-priority-filter",[{value:"all",text:"All"},{value:"default",text:"Only default"},{value:"important",text:"Only important"}].forEach(t=>{const e=new Option(t.text,t.value);o.add(e)});const c=document.createElement("label");c.textContent="Filter by priority:",c.setAttribute("for","project-priority-filter");const r=document.createElement("div");r.classList.add("projects"),t.append(e,n,c,o,r)})(),(()=>{const t=document.createElement("div");t.classList.add("none","project-form-window");const e=document.createElement("form");e.classList.add("project-form");const n=document.createElement("input");n.id="project-title",n.type="text",n.required=!0,n.minLength=1,n.maxLength=30;const o=document.createElement("label");o.textContent="Project title:",o.setAttribute("for","project-title");const c=document.createElement("p");c.textContent="Please fill in the field.",c.classList.add("project-form-validator","none");const r=document.createElement("select");r.id="project-priority",[{value:"default",text:"Default"},{value:"important",text:"Important"}].forEach(t=>{const e=new Option(t.text,t.value);r.add(e)});const i=document.createElement("label");i.textContent="Project priority:",i.setAttribute("for","project-priority");const a=document.createElement("div");a.classList.add("confirm-btn-container");const d=document.createElement("button");d.classList.add("project-btn","btn"),d.textContent="Add";const s=document.createElement("button");s.classList.add("cancel-project-btn","btn"),s.textContent="Cancel",a.append(d,s),e.append(o,n,c,i,r,a),t.append(e),document.body.append(t)})(),((t,e)=>{const n=e=>{t.innerHTML="",e.forEach(e=>{const n=document.createElement("div");n.classList.add("project-card","default"===e.priority?"default-project":"important-project"),n.dataset.id=e.id,n.innerHTML=`\n        <div class="project-title">${e.title}</div>\n        <div class='project-setting'>\n          <span class='priority ${"default"===e.priority?"icon-star-empty":"icon-star-full"}'></span>\n          <span class='icon-pencil'></span>\n          <span class='icon-bin2'></span>\n        </div>`,t.append(n)})};o.subscribe(n),n(e)})(document.querySelector(".projects"),o.getFiltered()),(()=>{const t=document.querySelector(".project-form-window"),e=document.querySelector(".create-btn"),n=document.querySelector(".project-btn"),i=document.querySelector("#project-title"),a=document.querySelector("#project-priority"),s=document.querySelector(".project-form-validator");e.addEventListener("click",()=>{c(t,"open"),n.textContent="Add"}),t.addEventListener("click",e=>{const n=e.target.classList.contains("project-form-window"),o=e.target.classList.contains("cancel-project-btn");(n||o)&&(e.preventDefault(),c(t,"close"),r(i,a,s))}),n.addEventListener("click",e=>{const{isEditMode:n,projectToEdit:l}=d.getState();e.preventDefault(),((t,e)=>0!==t.value.length||(e.classList.remove("none"),t.style.borderColor="rgb(141, 56, 56)",!1))(i,s)&&(n&&l?o.update(l,{title:i.value,priority:a.value}):o.add({id:crypto.randomUUID(),title:i.value,priority:a.value}),d.reset(),r(i,a,s),c(t,"close"))})})(),(()=>{const t=document.querySelector(".projects"),e=document.querySelector("#project-priority-filter"),n=document.querySelector(".confirm-window"),r=document.querySelector(".delete-project-btn"),i=document.querySelector(".project-form-window");let a=null;n.addEventListener("click",t=>{const e=t.target.classList.contains("confirm-widow"),o=t.target.classList.contains("cancel-dalete-project-btn");(e||o)&&(c(n,"close"),a=null)}),t.addEventListener("click",t=>{const e=t.target.closest(".project-card");if(e){if(t.target.classList.contains("icon-bin2")&&(a=e.dataset.id,c(n,"open")),t.target.classList.contains("icon-star-empty")||t.target.classList.contains("icon-star-full")){const t=e.dataset.id,n="important"===o.getAll().find(e=>e.id===t).priority?"default":"important";o.update(t,{priority:n})}if(t.target.classList.contains("icon-pencil")){const t=e.dataset.id,n=o.getAll().find(e=>e.id===t);if(!n)return;d.setEditMode(t);const r=document.querySelector("#project-title"),a=document.querySelector("#project-priority"),s=document.querySelector(".project-btn");r.value=n.title,a.value=n.priority,s.textContent="Save changes",c(i,"open")}}}),r.addEventListener("click",()=>{a&&(o.remove(a),c(n,"close"),a=null)}),e.addEventListener("change",()=>{o.setFilter(e.value)})})()})();